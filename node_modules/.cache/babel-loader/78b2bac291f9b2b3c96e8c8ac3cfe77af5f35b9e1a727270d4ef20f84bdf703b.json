{"ast":null,"code":"import _regeneratorRuntime from\"/home/sachamrt/projects/my_extension/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/sachamrt/projects/my_extension/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/sachamrt/projects/my_extension/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import'./App.css';import PlayIcon from'@mui/icons-material/PlayCircleSharp';import PauseIcon from'@mui/icons-material/PauseCircleFilledSharp';import PreviousIcon from'@mui/icons-material/SkipPreviousSharp';import NextIcon from'@mui/icons-material/SkipNextSharp';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var track={name:\"\",album:{images:{url:\"\"}},artists:{name:\"\"}};function WebPlayback(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),is_paused=_useState2[0],setPaused=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),playbackState=_useState4[0],setPlaybackState=_useState4[1];var PlayState=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('https://api.spotify.com/v1/me/player',{headers:{Authorization:\"Bearer \".concat(props.token)}});case 2:response=_context.sent;setPlaybackState(response.data);setPaused(response.data.is_playing);case 5:case\"end\":return _context.stop();}},_callee);}));return function PlayState(){return _ref.apply(this,arguments);};}();var pausePlayback=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.put('https://api.spotify.com/v1/me/player/pause',null,{headers:{Authorization:\"Bearer \".concat(props.token)}});case 3:response=_context2.sent;_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 9:;case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}));return function pausePlayback(){return _ref2.apply(this,arguments);};}();var playButton=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.put('https://api.spotify.com/v1/me/player/play',null,{headers:{Authorization:\"Bearer \".concat(props.token)}});case 3:response=_context3.sent;_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0);case 9:;case 10:case\"end\":return _context3.stop();}},_callee3,null,[[0,6]]);}));return function playButton(){return _ref3.apply(this,arguments);};}();var previousTrack=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var response;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.post('https://api.spotify.com/v1/me/player/previous',null,{headers:{Authorization:\"Bearer \".concat(props.token)}});case 3:response=_context4.sent;_context4.next=9;break;case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](0);console.error(_context4.t0);case 9:;case 10:case\"end\":return _context4.stop();}},_callee4,null,[[0,6]]);}));return function previousTrack(){return _ref4.apply(this,arguments);};}();var nextTrack=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var response;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.post('https://api.spotify.com/v1/me/player/next',null,{headers:{Authorization:\"Bearer \".concat(props.token)}});case 3:response=_context5.sent;_context5.next=9;break;case 6:_context5.prev=6;_context5.t0=_context5[\"catch\"](0);console.error(_context5.t0);case 9:;case 10:case\"end\":return _context5.stop();}},_callee5,null,[[0,6]]);}));return function nextTrack(){return _ref5.apply(this,arguments);};}();var renderStatus=function renderStatus(){if(!is_paused){return/*#__PURE__*/_jsx(PlayIcon,{className:\"btn-spotify\",onClick:function onClick(){is_paused?pausePlayback():playButton();}});}else{return/*#__PURE__*/_jsx(PauseIcon,{className:\"btn-spotify\",onClick:function onClick(){is_paused?pausePlayback():playButton();},children:\"PAUSE\"});}};useEffect(function(){var refresh=setInterval(function(){PlayState();},1000);return function(){return clearInterval(refresh);};},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"body\",{className:\"App\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{src:playbackState.item?playbackState.item.album.images[0].url:\"\",className:\"now-playing__cover\",alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"now-playing__side\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"now-playing__name\",children:playbackState.item?playbackState.item.name:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"now-playing__artist\",children:playbackState.item?playbackState.item.artists[0].name:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"Buttons\",children:[/*#__PURE__*/_jsx(PreviousIcon,{className:\"btn-spotify\",onClick:function onClick(){previousTrack();}}),renderStatus(),/*#__PURE__*/_jsx(NextIcon,{className:\"btn-spotify\",onClick:function onClick(){nextTrack();}})]})]})]})})})});}export default WebPlayback;","map":{"version":3,"names":["React","useState","useEffect","axios","PlayIcon","PauseIcon","PreviousIcon","NextIcon","track","name","album","images","url","artists","WebPlayback","props","is_paused","setPaused","playbackState","setPlaybackState","PlayState","get","headers","Authorization","token","response","data","is_playing","pausePlayback","put","console","error","playButton","previousTrack","post","nextTrack","renderStatus","refresh","setInterval","clearInterval","item"],"sources":["/home/sachamrt/projects/my_extension/src/WebPlayback.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport PlayIcon from '@mui/icons-material/PlayCircleSharp';\nimport PauseIcon from '@mui/icons-material/PauseCircleFilledSharp';\nimport PreviousIcon from '@mui/icons-material/SkipPreviousSharp';\nimport NextIcon from '@mui/icons-material/SkipNextSharp';\n\nconst track = {\n    name: \"\",\n    album: {\n        images: {\n            url: \"\"\n        }\n    },\n    artists: {\n        name: \"\"\n    }\n}\n\nfunction WebPlayback(props) {\n\n    const [is_paused, setPaused] = useState(false);\n    const [playbackState, setPlaybackState] = useState([]);\n\n    const PlayState = async () => {\n        const response = await axios.get('https://api.spotify.com/v1/me/player', {\n            headers: {\n                Authorization: `Bearer ${props.token}`\n            }\n        });\n        setPlaybackState(response.data);\n        setPaused(response.data.is_playing);\n    }\n\n    const pausePlayback = async () => {\n        try {\n            const response = await axios.put('https://api.spotify.com/v1/me/player/pause', null, {\n                headers: {\n                    Authorization: `Bearer ${props.token}`\n                }\n            });\n        } catch (error) {\n            console.error(error);\n        };\n    };\n\n    const playButton = async () => {\n        try {\n            const response = await axios.put('https://api.spotify.com/v1/me/player/play', null, {\n                headers: {\n                    Authorization: `Bearer ${props.token}`\n                }\n            });\n        } catch (error) {\n            console.error(error);\n        };\n    };\n\n    const previousTrack = async () => {\n        try {\n            const response = await axios.post('https://api.spotify.com/v1/me/player/previous', null, {\n                headers: {\n                    Authorization: `Bearer ${props.token}`\n                }\n            });\n        } catch (error) {\n            console.error(error);\n        };\n    };\n    \n    const nextTrack = async () => {\n        try {\n            const response = await axios.post('https://api.spotify.com/v1/me/player/next', null, {\n                headers: {\n                    Authorization: `Bearer ${props.token}`\n                }\n            });\n        } catch (error) {\n            console.error(error);\n        };\n    };\n    \n    const renderStatus = () => {\n        if (!is_paused) {\n            return (\n            <PlayIcon className=\"btn-spotify\" onClick={() => { is_paused ? pausePlayback() : playButton() }} >\n            </PlayIcon>\n            );\n        } else {\n            return (\n                <PauseIcon className=\"btn-spotify\" onClick={() => { is_paused ? pausePlayback() : playButton() }} >\n                    PAUSE\n                </PauseIcon>\n            );\n        }\n    }\n\n    useEffect(() => {\n        const refresh = setInterval(() => {\n            PlayState();\n        }, 1000);\n        return () => clearInterval(refresh);\n    }, []);\n\n    return (\n        <>\n            <body className='App'>\n                <div className=\"container\">\n                    <div className=\"main-wrapper\">\n                        <img src={playbackState.item ? playbackState.item.album.images[0].url : \"\"} \n                            className=\"now-playing__cover\" alt=\"\" />\n            \n                        <div className=\"now-playing__side\">\n                            <div className=\"now-playing__name\">{playbackState.item ? playbackState.item.name : \"\"}</div>\n                            <div className=\"now-playing__artist\">{playbackState.item ? playbackState.item.artists[0].name : \"\"}</div>\n\n                            <div className=\"Buttons\">\n                                <PreviousIcon className=\"btn-spotify\" onClick={() => { previousTrack() }} ></PreviousIcon>\n                                {renderStatus()}\n                                <NextIcon className=\"btn-spotify\" onClick={() => { nextTrack() }} ></NextIcon>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </body>\n        </>\n    );\n}\n\nexport default WebPlayback\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}