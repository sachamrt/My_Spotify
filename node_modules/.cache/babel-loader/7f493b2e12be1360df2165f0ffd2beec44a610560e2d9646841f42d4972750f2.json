{"ast":null,"code":"import _regeneratorRuntime from\"/home/sachamrt/projects/my_extension/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/sachamrt/projects/my_extension/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/sachamrt/projects/my_extension/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import WebPlayback from'./WebPlayback';import Login from'./Login';import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),refreshToken=_useState4[0],setRefreshToken=_useState4[1];useEffect(function(){function getToken(){return _getToken.apply(this,arguments);}function _getToken(){_getToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,refresh,refreshJson,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/auth/token');case 2:response=_context.sent;_context.next=5;return fetch('/auth/refresh_token');case 5:refresh=_context.sent;_context.next=8;return refresh.json();case 8:refreshJson=_context.sent;_context.next=11;return response.json();case 11:json=_context.sent;setRefreshToken(refreshJson.refresh_token);setToken(json.access_token);case 14:case\"end\":return _context.stop();}},_callee);}));return _getToken.apply(this,arguments);}getToken();},[]);return/*#__PURE__*/_jsx(_Fragment,{children:token===''?/*#__PURE__*/_jsx(Login,{}):/*#__PURE__*/_jsx(WebPlayback,{token:token,refresh_token:refreshToken})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","WebPlayback","Login","App","token","setToken","refreshToken","setRefreshToken","getToken","fetch","response","refresh","json","refreshJson","refresh_token","access_token"],"sources":["/home/sachamrt/projects/my_extension/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport WebPlayback from './WebPlayback'\nimport Login from './Login'\nimport './App.css';\n\nfunction App() {\n\n  const [token, setToken] = useState('');\n  const [refreshToken, setRefreshToken] = useState('');\n\n  useEffect(() => {\n\n    async function getToken() {\n      const response = await fetch('/auth/token');\n      const refresh = await fetch('/auth/refresh_token');\n      const refreshJson = await refresh.json();\n      const json = await response.json();\n      setRefreshToken(refreshJson.refresh_token);\n      setToken(json.access_token);\n    }\n\n    getToken();\n\n  }, []);\n\n  return (\n    <>\n        { (token === '') ? <Login/> : <WebPlayback token={token} refresh_token={refreshToken} /> }\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"8XAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAOC,YAAW,KAAM,eAAe,CACvC,MAAOC,MAAK,KAAM,SAAS,CAC3B,MAAO,WAAW,CAAC,gGAEnB,QAASC,IAAG,EAAG,CAEb,cAA0BJ,QAAQ,CAAC,EAAE,CAAC,wCAA/BK,KAAK,eAAEC,QAAQ,eACtB,eAAwCN,QAAQ,CAAC,EAAE,CAAC,yCAA7CO,YAAY,eAAEC,eAAe,eAEpCP,SAAS,CAAC,UAAM,SAECQ,SAAQ,oIAAvB,gMACyBC,MAAK,CAAC,aAAa,CAAC,QAArCC,QAAQ,qCACQD,MAAK,CAAC,qBAAqB,CAAC,QAA5CE,OAAO,qCACaA,QAAO,CAACC,IAAI,EAAE,QAAlCC,WAAW,sCACEH,SAAQ,CAACE,IAAI,EAAE,SAA5BA,IAAI,eACVL,eAAe,CAACM,WAAW,CAACC,aAAa,CAAC,CAC1CT,QAAQ,CAACO,IAAI,CAACG,YAAY,CAAC,CAAC,sDAC7B,2CAEDP,QAAQ,EAAE,CAEZ,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,yBACOJ,KAAK,GAAK,EAAE,cAAI,KAAC,KAAK,IAAE,cAAG,KAAC,WAAW,EAAC,KAAK,CAAEA,KAAM,CAAC,aAAa,CAAEE,YAAa,EAAG,EACzF,CAEP,CAEA,cAAeH,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}