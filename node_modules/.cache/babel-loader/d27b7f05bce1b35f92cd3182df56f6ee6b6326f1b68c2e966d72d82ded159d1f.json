{"ast":null,"code":"import _slicedToArray from\"/home/sachamrt/projects/my_extension/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var track={name:\"\",album:{images:[{url:\"\"}]},artists:[{name:\"\"}]};function WebPlayback(props){var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),player=_useState2[0],setPlayer=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),is_paused=_useState4[0],setPaused=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),is_active=_useState6[0],setActive=_useState6[1];var _useState7=useState(track),_useState8=_slicedToArray(_useState7,2),current_track=_useState8[0],setTrack=_useState8[1];useEffect(function(){var script=document.createElement(\"script\");script.src=\"https://sdk.scdn.co/spotify-player.js\";script.async=true;document.body.appendChild(script);window.onSpotifyWebPlaybackSDKReady=function(){var player=new window.Spotify.Player({name:'Web Playback SDK',getOAuthToken:function getOAuthToken(cb){cb(props.token);},volume:0.5});setPlayer(player);player.addListener('ready',function(_ref){var device_id=_ref.device_id;console.log('Ready with Device ID',device_id);});player.addListener('not_ready',function(_ref2){var device_id=_ref2.device_id;console.log('Device ID has gone offline',device_id);});player.addListener('player_state_changed',function(state){if(!state){return;}setTrack(state.track_window.current_track);setPaused(state.paused);player.getCurrentState().then(function(state){!state?setActive(false):setActive(true);});});player.connect();};},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{src:current_track.album.images[0].url,className:\"now-playing__cover\",alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"now-playing__side\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"now-playing__name\",children:current_track.name}),/*#__PURE__*/_jsx(\"div\",{className:\"now-playing__artist\",children:current_track.artists[0].name}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-spotify\",onClick:function onClick(){player.previousTrack();},children:\"<<\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-spotify\",onClick:function onClick(){player.togglePlay();},children:is_paused?\"PLAY\":\"PAUSE\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-spotify\",onClick:function onClick(){player.nextTrack();},children:\">>\"})]})]})})});}export default WebPlayback;","map":{"version":3,"names":["React","useState","useEffect","track","name","album","images","url","artists","WebPlayback","props","undefined","player","setPlayer","is_paused","setPaused","is_active","setActive","current_track","setTrack","script","document","createElement","src","async","body","appendChild","window","onSpotifyWebPlaybackSDKReady","Spotify","Player","getOAuthToken","cb","token","volume","addListener","device_id","console","log","state","track_window","paused","getCurrentState","then","connect","previousTrack","togglePlay","nextTrack"],"sources":["/home/sachamrt/projects/my_extension/src/WebPlayback.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst track = {\n    name: \"\",\n    album: {\n        images: [\n            { url: \"\" }\n        ]\n    },\n    artists: [\n        { name: \"\" }\n    ]\n}\n\nfunction WebPlayback(props) {\n\n    const [player, setPlayer] = useState(undefined);\n    const [is_paused, setPaused] = useState(false);\n    const [is_active, setActive] = useState(false);\n    const [current_track, setTrack] = useState(track);\n\n    useEffect(() => {\n\n        const script = document.createElement(\"script\");\n        script.src = \"https://sdk.scdn.co/spotify-player.js\";\n        script.async = true;\n\n        document.body.appendChild(script);\n\n        window.onSpotifyWebPlaybackSDKReady = () => {\n\n            const player = new window.Spotify.Player({\n                name: 'Web Playback SDK',\n                getOAuthToken: cb => { cb(props.token); },\n                volume: 0.5\n            });\n\n            setPlayer(player);\n\n            player.addListener('ready', ({ device_id }) => {\n                console.log('Ready with Device ID', device_id);\n            });\n\n            player.addListener('not_ready', ({ device_id }) => {\n                console.log('Device ID has gone offline', device_id);\n            });\n\n            player.addListener('player_state_changed', ( state => {\n\n                if (!state) {\n                    return;\n                }\n            \n                setTrack(state.track_window.current_track);\n                setPaused(state.paused);\n            \n                player.getCurrentState().then( state => { \n                    (!state)? setActive(false) : setActive(true) \n                });\n            }));\n\n            player.connect();\n        };\n    }, []);\n\n    return (\n        <>\n            <div className=\"container\">\n                <div className=\"main-wrapper\">\n                    <img src={current_track.album.images[0].url} \n                         className=\"now-playing__cover\" alt=\"\" />\n    \n                    <div className=\"now-playing__side\">\n                        <div className=\"now-playing__name\">{\n                                      current_track.name\n                                      }</div>\n    \n                        <div className=\"now-playing__artist\">{\n                                      current_track.artists[0].name\n                                      }</div>\n                        <button className=\"btn-spotify\" onClick={() => { player.previousTrack() }} >\n                            &lt;&lt;\n                        </button>\n\n                        <button className=\"btn-spotify\" onClick={() => { player.togglePlay() }} >\n                            { is_paused ? \"PLAY\" : \"PAUSE\" }\n                        </button>\n\n                        <button className=\"btn-spotify\" onClick={() => { player.nextTrack() }} >\n                            &gt;&gt;\n                        </button>\n                    </div>\n                </div>\n            </div>\n         </>\n    );\n}\n\nexport default WebPlayback\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}